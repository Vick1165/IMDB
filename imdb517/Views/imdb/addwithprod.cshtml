@model imdb517.Models.multi

@using (Html.BeginForm())
{
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <style>
            .modal-header, h4, .close {
                background-color: #5cb85c;
                color: white !important;
                text-align: center;
                font-size: 30px;
            }

            .modal-footer {
                background-color: #f9f9f9;
            }
        </style>
    </head>
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>multi</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.MoviesName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.MoviesName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.MoviesName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.YearOfRelease, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.YearOfRelease, new { htmlAttributes = new { @class = "form-control", type = "date" } })
                @Html.ValidationMessageFor(model => model.YearOfRelease, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Plot, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Plot, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Plot, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.producerid, "producerid", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div id="drop">


                    @Html.DropDownList("producerid", null, htmlAttributes: new { @class = "form-control" })
                    <span><button style="margin:2px" type="button" class="btn btn-default" id="myBtn">Add Producer</button></span>
                    @Html.ValidationMessageFor(model => model.producerid, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>



        <div class="form-groupr">

            <!-- Trigger the modal with a button -->
            @*<div style="text-align:right">
                    <a href="#" id="myBtn ">Login</a>

                </div>*@

            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header" style="padding:35px 50px;">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4> Producer Details</h4>
                        </div>
                        <div class="modal-body" style="padding:40px 50px;">
                            <div class="form-horizontal">
                                <h4>Producers</h4>
                                <hr />
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                <div class="form-group">
                                    @Html.LabelFor(model => model.ProducersName, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.ProducersName, "ProducersName", new { htmlAttributes = new { @class = "form-control" } })
                                        @Html.ValidationMessageFor(model => model.ProducersName, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.Sex, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.DropDownList("Sex", new List<SelectListItem>
                                   {
                                    new SelectListItem{ Text="Male", Value = "1" },
                                    new SelectListItem{ Text="Female", Value = "2" },
                                    new SelectListItem{ Text="Others", Value = "3" } }, htmlAttributes: new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Sex, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.DOB, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.DOB, "DOB", new { htmlAttributes = new { @class = "form-control", type = "date" } })
                                        @Html.ValidationMessageFor(model => model.DOB, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.Bio, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.Bio, "Bio", new { htmlAttributes = new { @class = "form-control" } })
                                        @Html.ValidationMessageFor(model => model.Bio, "", new { @class = "text-danger" })
                                    </div>
                                </div>


                            </div>


                            <button type="button" class="btn btn-success btn-block " id="popsubmit" data-dismiss="modal"><span class=""></span> Submit</button>

                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Actorid, "Actorid", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("Actorid", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.Actorid, "", new { @class = "text-danger" })
            </div>
        </div>






        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $("#myBtn").click(function () {
                $("#myModal").modal();
            });
        });


        $(function () {
            $("#popsubmit").click(function () {
                var formData = new FormData();
                formData.append("ProducersName", $("#ProducersName").val());
                formData.append("Sex", $("#Sex").val());
                formData.append("DOB", $("#DOB").val());
                formData.append("Bio", $("#Bio").val());
                $.ajax({
                    url: "/imdb/addwithprod",
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: formData,
                    success: function (response) {
                        alert(response);
                        $("#drop").html(response);
                        
                    }
                });
            });
        });
    </script>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

